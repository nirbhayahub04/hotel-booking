{% extends "client/layouts/base.html" %}
{% load static %}
{% block content %}
    <div class="container mx-auto p-4">
        <!-- Stats Cards Row -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
            <!-- Users Card -->
            <div class="bg-gradient-to-br from-blue-600 to-blue-500 rounded-xl shadow-lg p-6 relative overflow-hidden transition-transform hover:scale-[1.02]">
                <div class="absolute inset-0 bg-white/5"></div>
                <div class="relative z-10">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="bg-white/20 backdrop-blur-sm rounded-xl p-3 w-12 h-12 flex items-center justify-center shadow-sm">
                                <i class="fas fa-users text-white text-lg"></i>
                            </div>
                            <h3 class="text-white text-2xl font-bold mt-4">1,600</h3>
                            <p class="text-white/90 text-sm font-medium">Active Users</p>
                        </div>
                        <div class="text-right">
                            <div class="dropdown relative">
                                <button class="text-white/80 hover:text-white transition-colors dropdown-toggle focus:outline-none focus:ring-2 focus:ring-white/30 rounded-lg p-1">
                                    <i class="fas fa-ellipsis-h"></i>
                                </button>
                                <div class="dropdown-menu hidden absolute right-0 mt-2 bg-white rounded-lg shadow-xl py-2 w-32 border border-gray-100">
                                    <a href="#"
                                       class="block px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors">Action</a>
                                    <a href="#"
                                       class="block px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors">Another action</a>
                                </div>
                            </div>
                            <p class="text-white/90 text-sm font-semibold mt-3 flex items-center justify-end gap-1">
                                <span class="inline-block bg-white/10 px-2 py-1 rounded-md text-xs">+55%</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Repeat similar improved cards for other stats -->
        </div>
        <!-- Reviews and Projects Row -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Reviews Section -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="p-6 border-b border-gray-100">
                    <h6 class="text-lg font-bold text-gray-800">User Reviews</h6>
                </div>
                <div class="p-6">
                    <ul class="space-y-5">
                        <li>
                            <div class="w-full">
                                <div class="flex justify-between items-center mb-3">
                                    <span class="text-sm font-medium text-gray-700">Positive Reviews</span>
                                    <span class="text-sm font-semibold text-blue-600">80%</span>
                                </div>
                                <div class="w-full bg-gray-100 rounded-full h-2.5">
                                    <div class="bg-gradient-to-r from-blue-500 to-blue-400 h-2.5 rounded-full shadow-sm"
                                         style="width: 80%"></div>
                                </div>
                            </div>
                        </li>
                        <!-- Add other review items with different colors -->
                    </ul>
                </div>
                <div class="p-6 border-t border-gray-100 flex items-center justify-between bg-gray-50">
                    <p class="text-sm text-gray-600 w-2/3">
                        Over <b class="text-gray-800">1.5M+</b> developers trust our products
                    </p>
                    <button class="bg-gray-800 hover:bg-gray-900 text-white px-4 py-2.5 rounded-xl text-sm font-medium transition-colors flex items-center gap-2">
                        View All
                        <i class="fas fa-arrow-right text-xs"></i>
                    </button>
                </div>
            </div>
            <!-- Projects Table -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="p-6 border-b border-gray-100 flex justify-between items-center">
                    <div>
                        <h6 class="text-lg font-bold text-gray-800">Active Projects</h6>
                        <p class="text-sm text-gray-600 mt-1 flex items-center gap-2">
                            <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                            <span class="font-medium">30 completed</span> this month
                        </p>
                    </div>
                    <div class="dropdown relative">
                        <button class="text-gray-500 hover:text-gray-700 transition-colors dropdown-toggle focus:outline-none focus:ring-2 focus:ring-blue-500/30 rounded-lg p-2">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                        <!-- Dropdown menu -->
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="text-left py-4 px-6 text-xs font-semibold text-gray-500 uppercase tracking-wider">Project</th>
                                <th class="text-left py-4 px-6 text-xs font-semibold text-gray-500 uppercase tracking-wider">Team</th>
                                <th class="text-center py-4 px-6 text-xs font-semibold text-gray-500 uppercase tracking-wider">Budget</th>
                                <th class="text-center py-4 px-6 text-xs font-semibold text-gray-500 uppercase tracking-wider">Progress</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-100">
                            <tr class="hover:bg-gray-50 transition-colors">
                                <td class="py-4 px-6">
                                    <div class="flex items-center gap-4">
                                        <div class="w-9 h-9 rounded-lg bg-blue-50 flex items-center justify-center">
                                            <img src="{% static 'assets/img/small-logos/logo-xd.svg' %}"
                                                 class="w-5 h-5"
                                                 alt="XD Logo">
                                        </div>
                                        <span class="text-sm font-medium text-gray-800">Soft UI XD</span>
                                    </div>
                                </td>
                                <td class="py-4 px-6">
                                    <div class="flex -space-x-2">
                                        <!-- Member avatars with hover effect -->
                                        <div class="relative group">
                                            <img src="{% static 'assets/img/team-1.jpg' %}"
                                                 class="w-8 h-8 rounded-full border-2 border-white shadow-sm hover:z-10 hover:scale-110 transition-transform">
                                            <span class="absolute bottom-full mb-2 hidden group-hover:block px-2 py-1 bg-gray-800 text-white text-xs rounded-md shadow-lg">
                                                John Doe
                                            </span>
                                        </div>
                                        <!-- Add more team members -->
                                    </div>
                                </td>
                                <td class="text-center py-4 px-6 text-sm font-medium text-gray-800">$14,000</td>
                                <td class="py-4 px-6">
                                    <div class="max-w-[120px] mx-auto">
                                        <div class="flex justify-between text-xs font-medium mb-1.5 text-gray-600">
                                            <span>Progress</span>
                                            <span>60%</span>
                                        </div>
                                        <div class="w-full bg-gray-100 rounded-full h-2">
                                            <div class="bg-gradient-to-r from-blue-500 to-blue-400 h-2 rounded-full shadow-sm transition-all duration-300"
                                                 style="width: 60%"></div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <!-- More rows -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- Charts Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-6">
                    <h6 class="text-lg font-bold text-gray-800">Active Users</h6>
                    <div class="flex gap-2">
                        <button class="text-gray-500 hover:text-gray-700 p-2 rounded-lg transition-colors">
                            <i class="fas fa-ellipsis-h"></i>
                        </button>
                    </div>
                </div>
                <div class="h-72">
                    <canvas id="chart-bars"></canvas>
                </div>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-6">
                    <h6 class="text-lg font-bold text-gray-800">Revenue Overview</h6>
                    <div class="flex items-center gap-3 text-sm">
                        <div class="flex items-center gap-1.5">
                            <span class="w-2.5 h-2.5 bg-blue-500 rounded-full"></span>
                            <span class="text-gray-600">2023</span>
                        </div>
                        <div class="flex items-center gap-1.5">
                            <span class="w-2.5 h-2.5 bg-gray-300 rounded-full"></span>
                            <span class="text-gray-600">2022</span>
                        </div>
                    </div>
                </div>
                <div class="h-72">
                    <canvas id="chart-line"></canvas>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}
{% block javascript %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    // Enhanced dropdown functionality
    document.querySelectorAll('.dropdown-toggle').forEach(button => {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            const menu = this.parentElement.querySelector('.dropdown-menu');
            document.querySelectorAll('.dropdown-menu').forEach(otherMenu => {
                if (otherMenu !== menu) otherMenu.classList.add('hidden');
            });
            menu.classList.toggle('hidden');
        });
    });

    // Close dropdowns when clicking outside
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.dropdown')) {
            document.querySelectorAll('.dropdown-menu').forEach(menu => {
                menu.classList.add('hidden');
            });
        }
    });

    // Chart initialization with gradients
    const createGradient = (ctx, color1, color2) => {
        const gradient = ctx.createLinearGradient(0, 0, 0, 400);
        gradient.addColorStop(0, color1);
        gradient.addColorStop(1, color2);
        return gradient;
    };

    // Bar Chart
    const ctxBars = document.getElementById('chart-bars').getContext('2d');
    new Chart(ctxBars, {
        type: 'bar',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [{
                label: 'Users',
                data: [65, 59, 80, 81, 56, 55],
                backgroundColor: createGradient(ctxBars, 'rgba(59, 130, 246, 0.8)', 'rgba(59, 130, 246, 0.2)'),
                borderRadius: 8,
                borderSkipped: false,
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    grid: { display: false },
                    ticks: { color: '#6B7280' }
                },
                x: {
                    grid: { display: false },
                    ticks: { color: '#6B7280' }
                }
            },
            plugins: { 
                legend: { display: false },
                tooltip: {
                    backgroundColor: '#1F2937',
                    titleFont: { size: 14 },
                    bodyFont: { size: 12 },
                    padding: 12,
                    cornerRadius: 8
                }
            }
        }
    });

    // Line Chart
    const ctxLine = document.getElementById('chart-line').getContext('2d');
    new Chart(ctxLine, {
        type: 'line',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [{
                label: '2023',
                data: [65, 59, 80, 81, 56, 55],
                borderColor: '#3B82F6',
                borderWidth: 2,
                tension: 0.4,
                fill: false,
                pointRadius: 4,
                pointHoverRadius: 6,
                pointBackgroundColor: '#fff',
                pointBorderColor: '#3B82F6'
            },
            {
                label: '2022',
                data: [45, 39, 60, 71, 46, 45],
                borderColor: '#E5E7EB',
                borderWidth: 2,
                tension: 0.4,
                fill: false,
                pointRadius: 4,
                pointHoverRadius: 6,
                pointBackgroundColor: '#fff',
                pointBorderColor: '#E5E7EB'
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    grid: { display: false },
                    ticks: { color: '#6B7280' }
                },
                x: {
                    grid: { display: false },
                    ticks: { color: '#6B7280' }
                }
            },
            plugins: { 
                legend: { display: false },
                tooltip: {
                    backgroundColor: '#1F2937',
                    titleFont: { size: 14 },
                    bodyFont: { size: 12 },
                    padding: 12,
                    cornerRadius: 8
                }
            }
        }
    });
});
    </script>
{% endblock javascript %}
