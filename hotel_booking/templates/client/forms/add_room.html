{% extends "client/layouts/base.html" %}
{% load static %}
{% block content %}
    <div class="container mx-auto p-6">
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
            <!-- Card Header -->
            <div class="bg-gradient-to-r from-blue-600 to-indigo-500 p-6">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-2xl font-bold text-white mb-2">Create New Room</h2>
                    <p class="text-blue-100 text-sm">Fill in the details to add a new room to your property</p>
                </div>
            </div>
            <!-- Form Content -->
            <div class="p-6">
                <form method="post"
                      enctype="multipart/form-data"
                      class="needs-validation max-w-4xl mx-auto"
                      novalidate>
                    {% csrf_token %}
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Left Column -->
                        <div class="space-y-5">
                            <!-- Room ID -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Room Number</label>
                                <div class="relative">
                                    {{ form.room_number }}
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                        <i class="fas fa-hashtag text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                            <!-- Room Type -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Room Type</label>
                                <div class="relative">
                                    {{ form.room_type }}
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                        <i class="fas fa-caret-down text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                            <!-- Bed Configuration -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Bed Setup</label>
                                {{ form.bed_configuration }}
                                <p class="mt-1 text-xs text-gray-500">Example: 1 King Bed, 2 Queen Beds</p>
                            </div>
                            <!-- Max Occupancy -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Max Occupancy</label>
                                <div class="relative">
                                    {{ form.max_occupancy }}
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                        <i class="fas fa-users text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                            <!-- Amenities -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Amenities</label>
                                <div class="relative">
                                    {{ form.amenities }}
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                        <i class="fas fa-tag text-gray-400"></i>
                                    </div>
                                </div>
                                <p class="mt-1 text-xs text-gray-500">Separate with commas</p>
                            </div>
                            <!-- Bathroom Type -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Bathroom</label>
                                <div class="relative">
                                    {{ form.bathroom_type }}
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                        <i class="fas fa-shower text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Right Column -->
                        <div class="space-y-5">
                            <!-- Pricing Section -->
                            <div class="bg-gray-50 p-4 rounded-xl">
                                <h3 class="text-sm font-semibold text-gray-700 mb-3">Pricing Details</h3>
                                <!-- Base Price -->
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Base Rate</label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                            <span class="text-gray-500">$</span>
                                        </div>
                                        {{ form.base_price }}
                                    </div>
                                </div>
                            </div>
                            <!-- Facilities & Details -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Floor Level</label>
                                <div class="relative">
                                    {{ form.floor_number }}
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                        <i class="fas fa-layer-group text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                            <!-- View -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Room View</label>
                                <div class="relative">
                                    {{ form.view }}
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                        <i class="fas fa-binoculars text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Bottom Section -->
                    <div class="mt-8 space-y-6">
                        <!-- Size & Smoking -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Room Size</label>
                                <div class="relative">
                                    {{ form.size }}
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                        <span class="text-gray-500">sqm</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Smoking Policy</label>
                                <div class="relative">
                                    {{ form.smoking_policy }}
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                        <i class="fas fa-smoking-ban text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Accessibility -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Accessibility Features</label>
                            <div class="relative">
                                {{ form.accessibility_features }}
                                <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                    <i class="fas fa-universal-access text-gray-400"></i>
                                </div>
                            </div>
                            <p class="mt-1 text-xs text-gray-500">Example: Wheelchair access, grab bars</p>
                        </div>
                        <!-- Form Actions -->
                        <div class="flex flex-col md:flex-row justify-between gap-4 mt-8 border-t pt-6">
                            <a href="{% url 'get_rooms' %}"
                               class="px-6 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors flex items-center justify-center gap-2">
                                <i class="fas fa-arrow-left"></i>
                                Cancel
                            </a>
                            <button type="submit"
                                    class="px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-xl">
                                <i class="fas fa-save"></i>
                                Save Room Details
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock content %}
{% block javascript %}
    <script>
document.addEventListener('DOMContentLoaded', function() {
    // Enhanced form validation
    const forms = document.querySelectorAll('.needs-validation');
    
    Array.prototype.slice.call(forms).forEach(form => {
        form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
                
                // Add error styles
                form.querySelectorAll(':invalid').forEach(input => {
                    input.classList.add('border-red-500');
                    const errorMessage = input.nextElementSibling;
                    if (errorMessage && errorMessage.classList.contains('invalid-feedback')) {
                        errorMessage.style.display = 'block';
                    }
                });
            }
            
            form.classList.add('was-validated');
        }, false);
    });

    // Real-time validation
    document.querySelectorAll('input, select, textarea').forEach(input => {
        input.addEventListener('input', () => {
            if (input.checkValidity()) {
                input.classList.remove('border-red-500');
                input.classList.add('border-green-500');
                const errorMessage = input.nextElementSibling;
                if (errorMessage && errorMessage.classList.contains('invalid-feedback')) {
                    errorMessage.style.display = 'none';
                }
            } else {
                input.classList.remove('border-green-500');
                input.classList.add('border-red-500');
            }
        });
    });
});
    </script>
{% endblock javascript %}
